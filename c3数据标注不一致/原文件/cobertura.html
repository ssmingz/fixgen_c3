<!DOCTYPE html>
<style type='text/css'>
prompt {font-size:18px;font-weight: bold;color:purple;background-color:yellow}
desc {font-size:24px;font-weight: bold;color:white;background-color:red}diff_header {color:blue;}
diff_remove {color:red;}
diff_add {color:green;}
same {color:black;}
</style>
<html><body style='background-color:white;font-family: monospace'>
<prompt>cobertura-ID-8  </prompt></br><diff_header><xmp>Diff:</xmp></diff_header><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -6,7 +6,7 @@</xmp></diff_header><same><xmp>     if (!_sClass.equals("")) {</xmp></same><same><xmp>         _sClass += ".";</xmp></same><same><xmp>     }</xmp></same><diff_remove><xmp>-    _sClass += new String(getToken(2).image);</xmp></diff_remove><diff_add><xmp>+    _sClass += getToken(2).image;</xmp></diff_add><same><xmp>     _classLevel++;</xmp></same><same><xmp>     Modifiers();</xmp></same><same><xmp>     jj_consume_token(CLASS);</xmp></same><diff_header><xmp>@@ -46,15 +46,13 @@</xmp></diff_header><same><xmp>     Util.debug("_ncss++");</xmp></same><same><xmp>     _classLevel--;</xmp></same><same><xmp>     if (_classLevel == 0) {</xmp></same><diff_remove><xmp>-        Vector vMetrics = new Vector();</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new String(_sPackage + _sClass));</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new Integer(_ncss - oldNcss));</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new Integer(_functions - oldFunctions));</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new Integer(_classes - oldClasses));</xmp></diff_remove><diff_add><xmp>+        ObjectMetric metric = new ObjectMetric();</xmp></diff_add><diff_add><xmp>+        metric.name = _sPackage + _sClass;</xmp></diff_add><diff_add><xmp>+        metric.ncss = _ncss - oldNcss;</xmp></diff_add><diff_add><xmp>+        metric.functions = _functions - oldFunctions;</xmp></diff_add><diff_add><xmp>+        metric.classes = _classes - oldClasses;</xmp></diff_add><same><xmp>         Token lastToken = getToken(0);</xmp></same><diff_remove><xmp>-        vMetrics.addElement(new Integer(lastToken.endLine));</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new Integer(lastToken.endColumn));</xmp></diff_remove><diff_remove><xmp>-        _vClasses.addElement(vMetrics);</xmp></diff_remove><diff_add><xmp>+        _vClasses.add(metric);</xmp></diff_add><same><xmp>         _pPackageMetric.functions += _functions - oldFunctions;</xmp></same><same><xmp>         _pPackageMetric.classes++;</xmp></same><same><xmp>         _pPackageMetric.javadocs += _javadocs;</xmp></same><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -6,7 +6,7 @@</xmp></diff_header><same><xmp>     if (!_sClass.equals("")) {</xmp></same><same><xmp>         _sClass += ".";</xmp></same><same><xmp>     }</xmp></same><diff_remove><xmp>-    _sClass += new String(getToken(2).image);</xmp></diff_remove><diff_add><xmp>+    _sClass += getToken(2).image;</xmp></diff_add><same><xmp>     _classLevel++;</xmp></same><same><xmp>     jj_consume_token(INTERFACE);</xmp></same><same><xmp>     Identifier();</xmp></same><diff_header><xmp>@@ -67,14 +67,12 @@</xmp></diff_header><same><xmp>     Util.debug("_ncss++");</xmp></same><same><xmp>     _classLevel--;</xmp></same><same><xmp>     if (_classLevel == 0) {</xmp></same><diff_remove><xmp>-        Vector vMetrics = new Vector();</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new String(_sPackage + _sClass));</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new Integer(_ncss - oldNcss));</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new Integer(_functions - oldFunctions));</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(new Integer(_classes - oldClasses));</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(Util.getConstantObject());</xmp></diff_remove><diff_remove><xmp>-        vMetrics.addElement(Util.getConstantObject());</xmp></diff_remove><diff_remove><xmp>-        _vClasses.addElement(vMetrics);</xmp></diff_remove><diff_add><xmp>+        ObjectMetric metric = new ObjectMetric();</xmp></diff_add><diff_add><xmp>+        metric.name = _sPackage + _sClass;</xmp></diff_add><diff_add><xmp>+        metric.ncss = _ncss - oldNcss;</xmp></diff_add><diff_add><xmp>+        metric.functions = _functions - oldFunctions;</xmp></diff_add><diff_add><xmp>+        metric.classes = _classes - oldClasses;</xmp></diff_add><diff_add><xmp>+        _vClasses.add(metric);</xmp></diff_add><same><xmp>         _pPackageMetric.functions += _functions - oldFunctions;</xmp></same><same><xmp>         _pPackageMetric.classes++;</xmp></same><same><xmp>         _pPackageMetric.javadocs += _javadocs;</xmp></same><prompt>cobertura-ID-35  </prompt></br><diff_header><xmp>Diff:</xmp></diff_header><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -1,6 +1,6 @@</xmp></diff_header><same><xmp> public String printPackageNcss() {</xmp></same><same><xmp>     String sRetVal = "  <packages>\n";</xmp></same><diff_remove><xmp>-    Vector vPackageMetrics = _javancss.getPackageMetrics();</xmp></diff_remove><diff_add><xmp>+    List vPackageMetrics = _javancss.getPackageMetrics();</xmp></diff_add><same><xmp>     int packages = vPackageMetrics.size();</xmp></same><same><xmp>     int classesSum = 0;</xmp></same><same><xmp>     int functionsSum = 0;</xmp></same><diff_header><xmp>@@ -9,8 +9,8 @@</xmp></diff_header><same><xmp>     int javadocLnSum = 0;</xmp></same><same><xmp>     int singleLnSum = 0;</xmp></same><same><xmp>     int multiLnSum = 0;</xmp></same><diff_remove><xmp>-    for (Enumeration ePackages = vPackageMetrics.elements(); ePackages.hasMoreElements();) {</xmp></diff_remove><diff_remove><xmp>-        PackageMetric pPackageMetric = ((PackageMetric) (ePackages.nextElement()));</xmp></diff_remove><diff_add><xmp>+    for (Iterator ePackages = vPackageMetrics.iterator(); ePackages.hasNext();) {</xmp></diff_add><diff_add><xmp>+        PackageMetric pPackageMetric = ((PackageMetric) (ePackages.next()));</xmp></diff_add><same><xmp>         classesSum += pPackageMetric.classes;</xmp></same><same><xmp>         functionsSum += pPackageMetric.functions;</xmp></same><same><xmp>         ncssSum += pPackageMetric.ncss;</xmp></same><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -1,10 +1,10 @@</xmp></diff_header><same><xmp> private void _checkJavadocLines(Javancss pJavancss, String sPackage, int javadocLines) {</xmp></same><diff_remove><xmp>-    Vector vPackageMetrics = pJavancss.getPackageMetrics();</xmp></diff_remove><diff_add><xmp>+    List vPackageMetrics = pJavancss.getPackageMetrics();</xmp></diff_add><same><xmp>     Assert(vPackageMetrics.size() >= 1);</xmp></same><same><xmp>     PackageMetric pmPackage = null;</xmp></same><diff_remove><xmp>-    Enumeration ePackageMetrics = vPackageMetrics.elements();</xmp></diff_remove><diff_remove><xmp>-    while (ePackageMetrics.hasMoreElements()) {</xmp></diff_remove><diff_remove><xmp>-        PackageMetric pmNext = ((PackageMetric) (ePackageMetrics.nextElement()));</xmp></diff_remove><diff_add><xmp>+    Iterator ePackageMetrics = vPackageMetrics.iterator();</xmp></diff_add><diff_add><xmp>+    while (ePackageMetrics.hasNext()) {</xmp></diff_add><diff_add><xmp>+        PackageMetric pmNext = ((PackageMetric) (ePackageMetrics.next()));</xmp></diff_add><same><xmp>         if (pmNext.name.equals(sPackage)) {</xmp></same><same><xmp>             pmPackage = pmNext;</xmp></same><same><xmp>         }</xmp></same><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -1,13 +1,13 @@</xmp></diff_header><same><xmp> public String printPackageNcss() {</xmp></same><diff_remove><xmp>-    Vector vPackageMetrics = _javancss.getPackageMetrics();</xmp></diff_remove><diff_add><xmp>+    List vPackageMetrics = _javancss.getPackageMetrics();</xmp></diff_add><same><xmp>     int packages = vPackageMetrics.size();</xmp></same><same><xmp>     String sRetVal = _formatListHeader(packages, new String[]{ "  Classes", "Functions", "     NCSS", " Javadocs", "Package" });</xmp></same><same><xmp>     int classesSum = 0;</xmp></same><same><xmp>     int functionsSum = 0;</xmp></same><same><xmp>     int javadocsSum = 0;</xmp></same><same><xmp>     int ncssSum = 0;</xmp></same><diff_remove><xmp>-    for (Enumeration ePackages = vPackageMetrics.elements(); ePackages.hasMoreElements();) {</xmp></diff_remove><diff_remove><xmp>-        PackageMetric pPackageMetric = ((PackageMetric) (ePackages.nextElement()));</xmp></diff_remove><diff_add><xmp>+    for (Iterator ePackages = vPackageMetrics.iterator(); ePackages.hasNext();) {</xmp></diff_add><diff_add><xmp>+        PackageMetric pPackageMetric = ((PackageMetric) (ePackages.next()));</xmp></diff_add><same><xmp>         classesSum += pPackageMetric.classes;</xmp></same><same><xmp>         functionsSum += pPackageMetric.functions;</xmp></same><same><xmp>         ncssSum += pPackageMetric.ncss;</xmp></same><prompt>cobertura-ID-42  </prompt></br><diff_header><xmp>Diff:</xmp></diff_header><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -1,13 +1,13 @@</xmp></diff_header><same><xmp> public String printPackageNcss() {</xmp></same><diff_remove><xmp>-    Vector vPackageMetrics = _javancss.getPackageMetrics();</xmp></diff_remove><diff_add><xmp>+    List vPackageMetrics = _javancss.getPackageMetrics();</xmp></diff_add><same><xmp>     int packages = vPackageMetrics.size();</xmp></same><same><xmp>     String sRetVal = _formatListHeader(packages, new String[]{ "  Classes", "Functions", "     NCSS", " Javadocs", "Package" });</xmp></same><same><xmp>     int classesSum = 0;</xmp></same><same><xmp>     int functionsSum = 0;</xmp></same><same><xmp>     int javadocsSum = 0;</xmp></same><same><xmp>     int ncssSum = 0;</xmp></same><diff_remove><xmp>-    for (Enumeration ePackages = vPackageMetrics.elements(); ePackages.hasMoreElements();) {</xmp></diff_remove><diff_remove><xmp>-        PackageMetric pPackageMetric = ((PackageMetric) (ePackages.nextElement()));</xmp></diff_remove><diff_add><xmp>+    for (Iterator ePackages = vPackageMetrics.iterator(); ePackages.hasNext();) {</xmp></diff_add><diff_add><xmp>+        PackageMetric pPackageMetric = ((PackageMetric) (ePackages.next()));</xmp></diff_add><same><xmp>         classesSum += pPackageMetric.classes;</xmp></same><same><xmp>         functionsSum += pPackageMetric.functions;</xmp></same><same><xmp>         ncssSum += pPackageMetric.ncss;</xmp></same><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -1,10 +1,10 @@</xmp></diff_header><same><xmp> private void _checkJavadocLines(Javancss pJavancss, String sPackage, int javadocLines) {</xmp></same><diff_remove><xmp>-    Vector vPackageMetrics = pJavancss.getPackageMetrics();</xmp></diff_remove><diff_add><xmp>+    List vPackageMetrics = pJavancss.getPackageMetrics();</xmp></diff_add><same><xmp>     Assert(vPackageMetrics.size() >= 1);</xmp></same><same><xmp>     PackageMetric pmPackage = null;</xmp></same><diff_remove><xmp>-    Enumeration ePackageMetrics = vPackageMetrics.elements();</xmp></diff_remove><diff_remove><xmp>-    while (ePackageMetrics.hasMoreElements()) {</xmp></diff_remove><diff_remove><xmp>-        PackageMetric pmNext = ((PackageMetric) (ePackageMetrics.nextElement()));</xmp></diff_remove><diff_add><xmp>+    Iterator ePackageMetrics = vPackageMetrics.iterator();</xmp></diff_add><diff_add><xmp>+    while (ePackageMetrics.hasNext()) {</xmp></diff_add><diff_add><xmp>+        PackageMetric pmNext = ((PackageMetric) (ePackageMetrics.next()));</xmp></diff_add><same><xmp>         if (pmNext.name.equals(sPackage)) {</xmp></same><same><xmp>             pmPackage = pmNext;</xmp></same><same><xmp>         }</xmp></same><prompt>cobertura-ID-44  </prompt></br><diff_header><xmp>Diff:</xmp></diff_header><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -1,8 +1,6 @@</xmp></diff_header><diff_remove><xmp>-public boolean isCovered() {</xmp></diff_remove><diff_remove><xmp>-    lock.lock();</xmp></diff_remove><diff_add><xmp>+public synchronized boolean isCovered() {</xmp></diff_add><same><xmp>     try {</xmp></same><same><xmp>         return (getHits() > 0) && ((getNumberOfValidBranches() == 0) || ((1.0 - getBranchCoverageRate()) < 1.0E-4));</xmp></same><same><xmp>     } finally {</xmp></same><diff_remove><xmp>-        lock.unlock();</xmp></diff_remove><same><xmp>     }</xmp></same><same><xmp> }</xmp></same><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -1,8 +1,6 @@</xmp></diff_header><diff_remove><xmp>-public boolean hasBranch() {</xmp></diff_remove><diff_remove><xmp>-    lock.lock();</xmp></diff_remove><diff_add><xmp>+public synchronized boolean hasBranch() {</xmp></diff_add><same><xmp>     try {</xmp></same><same><xmp>         return (jumps != null) || (switches != null);</xmp></same><same><xmp>     } finally {</xmp></same><diff_remove><xmp>-        lock.unlock();</xmp></diff_remove><same><xmp>     }</xmp></same><same><xmp> }</xmp></same><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -1,8 +1,6 @@</xmp></diff_header><diff_remove><xmp>-public long getHits() {</xmp></diff_remove><diff_remove><xmp>-    lock.lock();</xmp></diff_remove><diff_add><xmp>+public synchronized long getHits() {</xmp></diff_add><same><xmp>     try {</xmp></same><same><xmp>         return hits;</xmp></same><same><xmp>     } finally {</xmp></same><diff_remove><xmp>-        lock.unlock();</xmp></diff_remove><same><xmp>     }</xmp></same><same><xmp> }</xmp></same><prompt>cobertura-ID-49  </prompt></br><diff_header><xmp>Diff:</xmp></diff_header><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -6,7 +6,7 @@</xmp></diff_header><same><xmp>     cr0.accept(cv0, 0);</xmp></same><same><xmp>     ClassReader cr = new ClassReader(cw0.toByteArray());</xmp></same><same><xmp>     ClassWriter cw = new ClassWriter(0);</xmp></same><diff_remove><xmp>-    BuildClassMapClassVisitor cv = new BuildClassMapClassVisitor(cw, ignoreRegexes, cv0.getDuplicatesLinesCollector(), detectIgnoredCv.getIgnoredMethodNamesAndSignatures());</xmp></diff_remove><diff_add><xmp>+    BuildClassMapClassVisitor cv = new BuildClassMapClassVisitor(cw, ignoreRegexes, ignoreClassAnnotations, cv0.getDuplicatesLinesCollector(), detectIgnoredCv.getIgnoredMethodNamesAndSignatures());</xmp></diff_add><same><xmp>     cr.accept(cv, EXPAND_FRAMES);</xmp></same><same><xmp>     if (logger.isDebugEnabled()) {</xmp></same><same><xmp>         logger.debug("=============== Detected duplicated code =============");</xmp></same><diff_header><xmp>--- </xmp></diff_header><diff_header><xmp>+++ </xmp></diff_header><diff_header><xmp>@@ -9,5 +9,5 @@</xmp></diff_header><same><xmp>             }</xmp></same><same><xmp>         }</xmp></same><same><xmp>     }</xmp></same><diff_remove><xmp>-    return new Arguments(baseDirectory, dataFile, destinationDirectory, commandsFile, ignoreRegexes, ignoreBranchesRegexes, classPatternIncludeClassesRegexes, classPatternExcludeClassesRegexes, failOnError, ignoreTrivial, threadsafeRigorous, encoding, minimumCoverageThresholds, classLineThreshold, classBranchThreshold, packageLineThreshold, packageBranchThreshold, totalLineThreshold, totalBranchThreshold, filesToInstrument, filesToMerge, ignoreMethodAnnotations, sources);</xmp></diff_remove><diff_add><xmp>+    return new Arguments(baseDirectory, dataFile, destinationDirectory, commandsFile, ignoreRegexes, ignoreBranchesRegexes, classPatternIncludeClassesRegexes, classPatternExcludeClassesRegexes, failOnError, ignoreTrivial, threadsafeRigorous, encoding, minimumCoverageThresholds, classLineThreshold, classBranchThreshold, packageLineThreshold, packageBranchThreshold, totalLineThreshold, totalBranchThreshold, filesToInstrument, filesToMerge, ignoreMethodAnnotations, ignoreClassAnnotations, sources);</xmp></diff_add><same><xmp> }</xmp></same></body></html>